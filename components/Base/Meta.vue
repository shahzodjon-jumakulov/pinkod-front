<script setup>
const { $moment } = useNuxtApp();

const props = defineProps({
  date: String,
  category: Object | Boolean,
  dark: Boolean,
  white: Boolean,
  link: Boolean,
  small: Boolean,
});

const date = $moment(props.date).local();
const isLatn = $moment.locale() === "uz-latn";

const tooltipText = computed(() => date.format(`D${isLatn ? "-" : " "}MMMM YYYY, H:m:s`));
</script>

<template>
  <div
    :class="small ? 'text-[0.625rem]' : 'text-xs'"
    class="flex items-center gap-1.5 leading-normal"
  >
    <UTooltip :text="tooltipText" :ui="{ background: 'bg-white-main dark:bg-white-main' }">
      <div
        :class="
          white ? 'text-white-main' : dark ? 'text-white-500' : 'text-black-400'
        "
        class="flex items-center gap-1 whitespace-nowrap"
      >
        <svg
          xmlns="http://www.w3.org/2000/svg"
          width="14"
          height="14"
          viewBox="0 0 14 14"
          fill="none"
        >
          <path
            fill-rule="evenodd"
            clip-rule="evenodd"
            d="M4.08341 1.021C4.32504 1.021 4.52091 1.21687 4.52091 1.4585V1.90342C4.9071 1.89599 5.33257 1.89599 5.8005 1.896H8.19966C8.6676 1.89599 9.09306 1.89599 9.47925 1.90342V1.4585C9.47925 1.21687 9.67512 1.021 9.91675 1.021C10.1584 1.021 10.3542 1.21687 10.3542 1.4585V1.94096C10.5059 1.95252 10.6495 1.96706 10.7853 1.98532C11.4693 2.07727 12.0228 2.27101 12.4594 2.70755C12.8959 3.1441 13.0896 3.69765 13.1816 4.38157C13.211 4.60014 13.2307 4.83867 13.2439 5.09854C13.2614 5.14578 13.2709 5.19685 13.2709 5.25016C13.2709 5.2906 13.2654 5.32975 13.2552 5.36693C13.2709 5.83474 13.2709 6.36593 13.2709 6.96726V8.19974C13.2709 9.27176 13.2709 10.1209 13.1816 10.7854C13.0896 11.4693 12.8959 12.0229 12.4594 12.4594C12.0228 12.896 11.4693 13.0897 10.7853 13.1817C10.1208 13.271 9.27168 13.271 8.19965 13.271H5.80051C4.72848 13.271 3.87936 13.271 3.21482 13.1817C2.53091 13.0897 1.97735 12.896 1.54081 12.4594C1.10426 12.0229 0.910527 11.4693 0.818577 10.7854C0.729232 10.1209 0.729239 9.27177 0.729248 8.19974V6.96725C0.729243 6.36593 0.729238 5.83475 0.745003 5.36693C0.734735 5.32976 0.729248 5.2906 0.729248 5.25016C0.729248 5.19686 0.738782 5.14577 0.756238 5.09853C0.769471 4.83867 0.789191 4.60013 0.818577 4.38157C0.910527 3.69765 1.10426 3.1441 1.54081 2.70755C1.97735 2.27101 2.53091 2.07727 3.21482 1.98532C3.35069 1.96706 3.49428 1.95252 3.64591 1.94096V1.4585C3.64591 1.21687 3.84179 1.021 4.08341 1.021ZM1.61188 5.68766C1.60443 6.06842 1.60425 6.50199 1.60425 7.00016V8.16683C1.60425 9.27914 1.60518 10.0694 1.68577 10.6688C1.76468 11.2557 1.91265 11.5938 2.15953 11.8407C2.4064 12.0876 2.74452 12.2356 3.33141 12.3145C3.93088 12.3951 4.7211 12.396 5.83341 12.396H8.16675C9.27906 12.396 10.0693 12.3951 10.6688 12.3145C11.2556 12.2356 11.5938 12.0876 11.8406 11.8407C12.0875 11.5938 12.2355 11.2557 12.3144 10.6688C12.395 10.0694 12.3959 9.27914 12.3959 8.16683V7.00016C12.3959 6.50199 12.3957 6.06842 12.3883 5.68766H1.61188ZM12.3483 4.81266H1.6519C1.66124 4.70218 1.67241 4.59755 1.68577 4.49816C1.76468 3.91127 1.91265 3.57315 2.15953 3.32627C2.4064 3.0794 2.74452 2.93143 3.33141 2.85252C3.93088 2.77193 4.7211 2.771 5.83342 2.771H8.16675C9.27906 2.771 10.0693 2.77193 10.6688 2.85252C11.2556 2.93143 11.5938 3.0794 11.8406 3.32627C12.0875 3.57315 12.2355 3.91127 12.3144 4.49816C12.3278 4.59755 12.3389 4.70218 12.3483 4.81266Z"
            :class="
              white
                ? 'fill-white-main'
                : dark
                ? 'fill-white-500'
                : 'fill-black-400'
            "
          />
        </svg>
        {{ $formatDate(date) }}
      </div>
    </UTooltip>
    <svg
      v-if="category"
      xmlns="http://www.w3.org/2000/svg"
      width="2"
      height="2"
      viewBox="0 0 2 2"
      fill="none"
    >
      <circle
        cx="1"
        cy="1"
        r="1"
        :class="
          white ? 'fill-white-main' : dark ? 'fill-white-500' : 'fill-black-400'
        "
      />
    </svg>
    <NuxtLinkLocale
      v-if="category && link"
      :to="`/category/${category.slug}`"
      :class="white ? 'text-white-main' : 'text-green-main'"
      class="hover:text-green-main active:text-green-500 transition-colors"
      >{{ category.name }}
    </NuxtLinkLocale>
    <span
      v-else-if="category"
      :class="white ? 'text-white-main' : 'text-green-main'"
      >{{ category.name }}</span
    >
  </div>
</template>
